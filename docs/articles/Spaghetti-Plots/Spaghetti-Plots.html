<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Note on bmlm’s Spaghetti Plots • bmlm</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/sandstone/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../jquery.sticky-kit.min.js"></script><script src="../../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../../index.html">bmlm</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li>
  <a href="../../articles/index.html">Articles</a>
</li>
<li>
  <a href="../../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mvuorre/bmlm/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>A Note on bmlm’s Spaghetti Plots</h1>
                        <h4 class="author">Matti Vuorre</h4>
            
            <h4 class="date">2017-10-02</h4>
          </div>

    
    
<div class="contents">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)
<span class="kw">library</span>(bmlm)</code></pre></div>
<p>Consider a mediation model in which Y is binary:</p>
<pre><code>## # A tibble: 6 x 5
##      id          x          m          y  biny
##   &lt;int&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt; &lt;int&gt;
## 1   101  0.3333333  0.9828781 -1.4420726     0
## 2   101  0.3333333  0.9279833  0.1441343     0
## 3   101  0.3333333 -0.7188603 -1.6259807     0
## 4   101  1.3333333  0.7450007  1.9219121     1
## 5   101 -1.6666667 -0.1241668 -1.9324941     0
## 6   101 -0.6666667 -1.2678081  0.6881956     1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fit_biny &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/mlm.html">mlm</a></span>(<span class="dt">d =</span> BLch9_biny, 
                <span class="dt">id =</span> <span class="st">"id"</span>,
                <span class="dt">y =</span> <span class="st">"biny"</span>, <span class="dt">binary_y =</span> <span class="ot">TRUE</span>,
                <span class="dt">cores=</span><span class="dv">4</span>, <span class="dt">iter =</span> <span class="dv">500</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../../reference/mlm_summary.html">mlm_summary</a></span>(fit_biny) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span>knitr<span class="op">::</span><span class="kw">kable</span>()</code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">Parameter</th>
<th align="right">Mean</th>
<th align="right">SE</th>
<th align="right">Median</th>
<th align="right">2.5%</th>
<th align="right">97.5%</th>
<th align="right">n_eff</th>
<th align="right">Rhat</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">a</td>
<td align="right">0.19</td>
<td align="right">0.04</td>
<td align="right">0.19</td>
<td align="right">0.12</td>
<td align="right">0.26</td>
<td align="right">665</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">b</td>
<td align="right">0.27</td>
<td align="right">0.05</td>
<td align="right">0.27</td>
<td align="right">0.16</td>
<td align="right">0.37</td>
<td align="right">783</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">cp</td>
<td align="right">0.23</td>
<td align="right">0.06</td>
<td align="right">0.24</td>
<td align="right">0.13</td>
<td align="right">0.34</td>
<td align="right">1000</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">me</td>
<td align="right">0.10</td>
<td align="right">0.03</td>
<td align="right">0.10</td>
<td align="right">0.06</td>
<td align="right">0.16</td>
<td align="right">410</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">c</td>
<td align="right">0.34</td>
<td align="right">0.06</td>
<td align="right">0.34</td>
<td align="right">0.22</td>
<td align="right">0.46</td>
<td align="right">760</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">pme</td>
<td align="right">0.31</td>
<td align="right">0.08</td>
<td align="right">0.31</td>
<td align="right">0.18</td>
<td align="right">0.48</td>
<td align="right">634</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
<p>The <code><a href="../../reference/mlm_spaghetti_plot.html">mlm_spaghetti_plot()</a></code> function produces figures in which the horizontal axis values of the M-Y graph (right panel, below) correspond to the vertical axis values of the X-M graph (left panel, below):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pasta &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/mlm_spaghetti_plot.html">mlm_spaghetti_plot</a></span>(fit_biny, BLch9_biny, 
                            <span class="dt">id=</span><span class="st">"id"</span>, <span class="dt">x=</span><span class="st">"x"</span>, <span class="dt">m=</span><span class="st">"m"</span>, <span class="dt">y=</span><span class="st">"biny"</span>,
                            <span class="dt">binary_y=</span>T)
gridExtra<span class="op">::</span><span class="kw">grid.arrange</span>(
    pasta[[<span class="dv">1</span>]], 
    pasta[[<span class="dv">2</span>]] <span class="op">+</span><span class="st"> </span><span class="kw">coord_cartesian</span>(<span class="dt">ylim =</span> <span class="dv">0</span><span class="op">:</span><span class="dv">1</span>), 
    <span class="dt">nrow =</span> <span class="dv">1</span>)</code></pre></div>
<p><img src="Spaghetti-Plots_files/figure-html/unnamed-chunk-5-1.png" width="672"></p>
<p>It is important to note that the fitted values (lines) on the right panel of this figure are therefore based on the variation of the fitted values in the left panel, and not on the observed values of <code>m</code>. This behavior usually makes sense and is the default option for <code><a href="../../reference/mlm_spaghetti_plot.html">mlm_spaghetti_plot()</a></code>. However, sometimes users may want to plot the M-Y relationship’s (b path’s) fitted values with the observed data values of M on the horizontal axis instead.</p>
<p>To do this, set <code>mx = "data"</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pasta2 &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/mlm_spaghetti_plot.html">mlm_spaghetti_plot</a></span>(fit_biny, BLch9_biny, 
                            <span class="dt">id=</span><span class="st">"id"</span>, <span class="dt">x=</span><span class="st">"x"</span>, <span class="dt">m=</span><span class="st">"m"</span>, <span class="dt">y=</span><span class="st">"biny"</span>,
                            <span class="dt">binary_y=</span>T, <span class="dt">mx =</span> <span class="st">"data"</span>)
gridExtra<span class="op">::</span><span class="kw">grid.arrange</span>(
    pasta2[[<span class="dv">1</span>]], 
    pasta2[[<span class="dv">2</span>]] <span class="op">+</span><span class="st"> </span><span class="kw">coord_cartesian</span>(<span class="dt">ylim =</span> <span class="dv">0</span><span class="op">:</span><span class="dv">1</span>),
    <span class="dt">nrow =</span> <span class="dv">1</span>)</code></pre></div>
<p><img src="Spaghetti-Plots_files/figure-html/unnamed-chunk-6-1.png" width="672"></p>
<p>As result, the horizontal axis variability for the b path figure (right panel) is much greater. However, the two panels are no longer directly comparable (vertical axis in left panel doesn’t match horizontal axis of right panel) or interpretable as the model’s implied mediated effect path.</p>
<p>Thanks for reading. Please notify the package’s developer on <a href="https://github.com/mvuorre/bmlm">GitHub</a> if you have further questions or comments.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Matti Vuorre.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
